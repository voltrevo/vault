import @/parse/CommaSequence.vx;
import p from '@/parse/parse.vx';

import ./DeferLiteral.vx;

RawSet := p.Sequence([
  p.Exact('#['),
  CommaSequence(DeferLiteral),
  p.Exact(']'),
]);

Set := p.Transform(
  RawSet,
  func([_, value, _]) => ['literal',
    ([#[]] ++ value:map(func(v) => #[v])):reduce(|),
  ],
);

return Set;
