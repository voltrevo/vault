return func(state, replies) {
  if (state:Kind() == 'null') {
    [[_, args]] := replies;

    if (args:Length() != 1u64) {
      log.info 'Expected 1 argument';
    }

    [entry] := args;

    state = {
      package: {
        files: {},
        entry,
      },
      filesRequested: [entry],
    };

    return [state, [['read', entry]]];
  }

  return [state, [['output', {state, replies}]]];
};
