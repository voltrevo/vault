import ./Expression.vx;
import ./operatorTypes.vx;

validTypes := operatorTypes.mutation | #['func'];

return func(expression) {
  [type, value, pos] := expression;

  if (type == 'note') {
    return [value];
  }

  notes := Expression(expression);

  if (!(type in validTypes)) {
    notes ++= [{
      level: 'warn',
      message: 'Unused expression',
      tags: #['unused', 'top-expression'],
      pos,
      subnotes: [],
    }];
  }

  return notes;
};
