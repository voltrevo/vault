import @/parse/CommaSequence.vx;
import p from '@/parse/parse.vx';

import ./DeferLiteral.vx;

RawSet := p.SequenceOne([
  [p.Exact('#[')],
  CommaSequence(DeferLiteral),
  [p.Exact(']')],
]);

func SetFromArray(arr) => (
  ([#[]] ++ arr:map(func(x) => #[x])):reduce(|)
);

Set := p.Transform(
  RawSet,
  func(value) => ['literal', SetFromArray(value)],
);

return Set;
