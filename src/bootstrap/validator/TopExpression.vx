import ./Expression.vx;
import ./operatorTypes.vx;

validTypes := operatorTypes.mutation | #['func'];

return func(expression) {
  [type, value, pos] := expression;

  if (type == 'note') {
    return {notes: [value], naming: []};
  }

  valInfo := Expression(expression);

  if (!(type in validTypes)) {
    valInfo.notes ++= [{
      level: 'warn',
      message: 'Unused expression',
      tags: #['unused', 'top-expression'],
      pos,
      subnotes: [],
    }];
  }

  return valInfo;
};
